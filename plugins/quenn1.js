const { plugins, smd, Config } = require("../lib");
let s_ser = true;

// ğŸ›‘ ğ—¦ğ—›ğ—¨ğ—§ğ——ğ—¢ğ—ªğ—¡ ğ—–ğ—¢ğ— ğ— ğ—”ğ—¡ğ—— ğŸ›‘  
smd(
    {
      cmdname: "shutdown",
      info: "ã€½ï¸ ğ™‹ğ™¤ğ™¬ğ™šğ™§ ğ™Šğ™›ğ™› ğ™©ğ™ğ™ğ™¨ ğ™…ğ™ªğ™£ğ™ .",
      type: "tools",
      fromMe: s_ser,
      filename: __filename,
    },
    async (cld) => {
      const { exec } = require("child_process");
  
      let savageReplies = [
        "âš ï¸ *ğ™Šğ™, ğ™„'ğ™¢ ğ™©ğ™ğ™§ğ™šğ™™ ğ™¤ğ™› ğ™®ğ™¤ğ™ª. ğ™‚ğ™¤ğ™¤ğ™™ğ™—ğ™®ğ™š.*",
        "ğŸš« *ğ™ğ™ğ™ªğ™©ğ™©ğ™ğ™£ğ™œ ğ™™ğ™¤ğ™¬ğ™£... ğ˜¿ğ™¤ğ™£'ğ™© ğ™˜ğ™–ğ™¡ğ™¡ ğ™¢ğ™š ğ™–ğ™œğ™–ğ™ğ™£!*",
        "ğŸ’€ *ğ™ğ™ğ™£ğ™–ğ™¡ğ™¡ğ™®, ğ™¥ğ™šğ™–ğ™˜ğ™š ğ™›ğ™§ğ™¤ğ™¢ ğ™®ğ™¤ğ™ª!*",
        "ğŸ”¥ *ğ™ğ™ğ™¢ğ™š ğ™©ğ™¤ ğ™œğ™ğ™¤ğ™¨ğ™© ğ™©ğ™ğ™ğ™¨ ğ™¨ğ™©ğ™ªğ™¥ğ™ğ™™ ğ™˜ğ™ğ™–ğ™©!*",
      ];
  
      let replyText =
        savageReplies[Math.floor(Math.random() * savageReplies.length)];
  
      cld.reply(replyText);
  
      exec("pm2 stop all", (error, stdout, stderr) => {
        if (error) {
          return cld.reply(`âŒ *ğ™€ğ™§ğ™§ğ™¤ğ™§:* ğ™ğ™ğ™ğ™¨ ğ™—ğ™¤ğ™© ğ™ğ™¨ ğ™–ğ™¨ ğ™ªğ™¨ğ™šğ™¡ğ™šğ™¨ğ™¨ ğ™–ğ™¨ ğ™®ğ™¤ğ™ª.\n\`\`\`${error.message}\`\`\``);
        }
        if (stderr) {
          return cld.reply(`âš ï¸ *ğ™’ğ™–ğ™§ğ™£ğ™ğ™£ğ™œ:* ğ™”ğ™¤ğ™ª ğ™›ğ™–ğ™ğ™¡ğ™šğ™™ ğ™–ğ™© ğ™¡ğ™ğ™›ğ™š ğ™–ğ™£ğ™™ ğ™–ğ™© ğ™˜ğ™¤ğ™™ğ™ğ™£ğ™œ.\n\`\`\`${stderr}\`\`\``);
        }
        cld.reply("âœ… *ğ˜½ğ™¤ğ™© ğ™ğ™–ğ™¨ ğ™—ğ™šğ™šğ™£ ğ™¨ğ™ğ™ªğ™© ğ™™ğ™¤ğ™¬ğ™£. ğ™‰ğ™¤ğ™¬ ğ™¡ğ™šğ™–ğ™«ğ™š ğ™¢ğ™š ğ™–ğ™¡ğ™¤ğ™£ğ™š!*");
      });
    }
  );
  

// ğŸ”Œ ğ—œğ—¡ğ—¦ğ—§ğ—”ğ—Ÿğ—Ÿğ—˜ğ—— ğ—£ğ—Ÿğ—¨ğ—šğ—œğ—¡ğ—¦ ğ—–ğ—¢ğ— ğ— ğ—”ğ—¡ğ—— ğŸ”Œ  
smd(
    {
      cmdname: "plugins",
      alias: ["plugin"],
      type: "owner",
      info: "ğŸ“¦ ğ™ğ™ğ™¤ğ™¬ğ™¨ ğ™¡ğ™ğ™¨ğ™© ğ™¤ğ™› ğ™ğ™£ğ™¨ğ™©ğ™–ğ™¡ğ™¡ğ™šğ™™ ğ™¢ğ™¤ğ™™ğ™ªğ™¡ğ™šğ™¨.",
      fromMe: s_ser,
      filename: __filename,
      use: "<plugin_name>",
    },
    async (cld, pluginName) => {
      try {
        let installedPlugins = await plugins(cld, "plugins", pluginName);
  
        let replyText = installedPlugins
          ? !pluginName
            ? "ğŸ› ï¸ *ğ˜¼ğ™¡ğ™¡ ğ™„ğ™£ğ™¨ğ™©ğ™–ğ™¡ğ™¡ğ™šğ™™ ğ™ˆğ™¤ğ™™ğ™ªğ™¡ğ™šğ™¨:* \n\n" + installedPlugins
            : installedPlugins
          : "âŒ *_ğ™‰ğ™¤ ğ™¥ğ™¡ğ™ªğ™œğ™ğ™£ğ™¨ ğ™›ğ™¤ğ™ªğ™£ğ™™. ğ™ˆğ™–ğ™®ğ™—ğ™š ğ™ğ™› ğ™®ğ™¤ğ™ª ğ™¬ğ™šğ™§ğ™šğ™£'ğ™© ğ™– ğ™—ğ™§ğ™–ğ™ğ™£ğ™¡ğ™šğ™¨ğ™¨ ğ™¬ğ™–ğ™¨ğ™©ğ™š, ğ™®ğ™¤ğ™ª'ğ™™ ğ™ ğ™£ğ™¤ğ™¬ ğ™ğ™¤ğ™¬ ğ™©ğ™¤ ğ™ğ™£ğ™¨ğ™©ğ™–ğ™¡ğ™¡ ğ™¤ğ™£ğ™š._*";
  
        await cld.send(replyText);
      } catch (err) {
        cld.error(
          "âš ï¸ *ğ™€ğ™§ğ™§ğ™¤ğ™§:* ğ™€ğ™ğ™©ğ™ğ™šğ™§ ğ™©ğ™ğ™š ğ™—ğ™¤ğ™© ğ™ğ™¨ ğ™™ğ™¤ğ™£ğ™š ğ™¬ğ™ğ™©ğ™ ğ™®ğ™¤ğ™ª, ğ™¤ğ™§ ğ™®ğ™¤ğ™ª'ğ™§ğ™š ğ™Ÿğ™ªğ™¨ğ™© ğ™©ğ™ğ™ğ™˜ğ™ -ğ™¨ğ™ ğ™ªğ™¡ğ™¡ğ™šğ™™.\n\n```" +
            err +
            "```"
        );
      }
    }
  );
  

// âŒ ğ—¨ğ—¡ğ—œğ—¡ğ—¦ğ—§ğ—”ğ—Ÿğ—Ÿ ğ—£ğ—Ÿğ—¨ğ—šğ—œğ—¡ğ—¦ ğ—–ğ—¢ğ— ğ— ğ—”ğ—¡ğ—— âŒ
smd(
    {
      pattern: "uninstall",
      alias: ["remove"],
      type: "owner",
      info: "ğŸš® ğ™ğ™šğ™¢ğ™¤ğ™«ğ™šğ™¨ ğ™šğ™­ğ™©ğ™šğ™§ğ™£ğ™–ğ™¡ ğ™¢ğ™¤ğ™™ğ™ªğ™¡ğ™šğ™¨.",
      fromMe: s_ser,
      filename: __filename,
      use: "<plugin_name>",
    },
    async (cld, pluginName) => {
      if (!pluginName) {
        return await cld.reply(
          "âŒ *_ğ™ğ™¨ğ™š ğ™®ğ™¤ğ™ªğ™§ ğ™—ğ™§ğ™–ğ™ğ™£ ğ™›ğ™¤ğ™§ ğ™¤ğ™£ğ™˜ğ™š ğ™–ğ™£ğ™™ ğ™©ğ™šğ™¡ğ™¡ ğ™¢ğ™š ğ™¬ğ™ğ™–ğ™© ğ™©ğ™¤ ğ™§ğ™šğ™¢ğ™¤ğ™«ğ™š._*"
        );
      }
  
      if (pluginName.toLowerCase() === "alls") {
        return await cld.reply(
          "âš ï¸ *_ğ™ğ™šğ™–ğ™¡ğ™¡ğ™®? ğ˜¼ğ™§ğ™š ğ™®ğ™¤ğ™ª ğ™©ğ™ğ™–ğ™© ğ™¨ğ™©ğ™ªğ™¥ğ™ğ™™ ğ™©ğ™¤ ğ™§ğ™šğ™¢ğ™¤ğ™«ğ™š ğ™€ğ™‘ğ™€ğ™ğ™”ğ™ğ™ƒğ™„ğ™‰ğ™‚? ğ™„ğ™› ğ™¨ğ™¤, ğ™—ğ™®ğ™š-ğ™—ğ™®ğ™š ğ™©ğ™¤ ğ™®ğ™¤ğ™ªğ™§ ğ™—ğ™¤ğ™©._*"
        );
      }
  
      try {
        await cld.send(
          await plugins(cld, "remove", pluginName, __dirname),
          {},
          "",
          cld
        );
      } catch (err) {
        await cld.reply(
          "âš ï¸ *_ğ™„ ğ™˜ğ™–ğ™£'ğ™© ğ™šğ™«ğ™šğ™£ ğ™ªğ™£ğ™ğ™£ğ™¨ğ™©ğ™–ğ™¡ğ™¡ ğ™©ğ™ğ™ğ™¨, ğ™–ğ™£ğ™™ ğ™„'ğ™¢ ğ™¨ğ™ªğ™¥ğ™¥ğ™¤ğ™¨ğ™šğ™™ ğ™©ğ™¤ ğ™—ğ™š ğ™©ğ™ğ™š ğ™™ğ™ªğ™¢ğ™— ğ™—ğ™¤ğ™©? ğ˜¾ğ™ğ™šğ™˜ğ™  ğ™®ğ™¤ğ™ªğ™§ ğ™˜ğ™¤ğ™™ğ™š, ğ™¡ğ™¤ğ™¨ğ™šğ™§._*\n\n```" +
            err +
            "```"
        );
      }
    }
  );


  // ğŸ”¥ ğ—œğ—¡ğ—¦ğ—§ğ—”ğ—Ÿğ—Ÿ ğ—£ğ—Ÿğ—¨ğ—šğ—œğ—¡ ğ—–ğ—¢ğ— ğ— ğ—”ğ—¡ğ—— ğŸ”¥
smd(
    {
      cmdname: "install",
      type: "owner",
      info: "ğŸ“¥ ğ™„ğ™£ğ™¨ğ™©ğ™–ğ™¡ğ™¡ğ™¨ ğ™šğ™­ğ™©ğ™šğ™§ğ™£ğ™–ğ™¡ ğ™¢ğ™¤ğ™™ğ™ªğ™¡ğ™šğ™¨...",
      fromMe: s_ser,
      filename: __filename,
      use: "<gist url>",
    },
    async (cld, pluginUrl) => {
      let url = pluginUrl
        ? pluginUrl
        : cld.quoted
        ? cld.quoted.text
        : "";
  
      if (!url.toLowerCase().includes("https")) {
        return await cld.reply(
          "âŒ *_ğ™ƒğ™šğ™¡ğ™¡ğ™¤, ğ˜½ğ™§ğ™–ğ™ğ™£-ğ˜¿ğ™šğ™–ğ™™. ğ™ğ™§ğ™® ğ™œğ™ğ™«ğ™ğ™£ğ™œ ğ™– ğ™«ğ™–ğ™¡ğ™ğ™™ ğ™¡ğ™ğ™£ğ™  ğ™ğ™£ğ™¨ğ™©ğ™šğ™–ğ™™ ğ™¤ğ™› ğ™¢ğ™šğ™¨ğ™¨ğ™ğ™£ğ™œ ğ™¢ğ™® ğ™˜ğ™¤ğ™™ğ™š ğ™ªğ™¥._*"
        );
      }
  
      try {
        await cld.reply(
          await plugins(cld, "install", url, __dirname)
        );
      } catch (err) {
        await cld.reply(
          "âš ï¸ *_ğ˜¼ğ™£ğ™¤ğ™©ğ™ğ™šğ™§ ğ™™ğ™–ğ™®, ğ™–ğ™£ğ™¤ğ™©ğ™ğ™šğ™§ ğ™›ğ™–ğ™ğ™¡ğ™ªğ™§ğ™š ğ™›ğ™§ğ™¤ğ™¢ ğ™®ğ™¤ğ™ª..._*" +
            "\n\n```" +
            err +
            "```"
        );
      }
    }
  );